package com.todolist.todo;

import jakarta.persistence.Entity;
import jakarta.persistence.GeneratedValue;
import jakarta.persistence.GenerationType;
import jakarta.persistence.Id;
import jakarta.validation.constraints.NotBlank;
import java.time.LocalDateTime; 
import jakarta.persistence.PrePersist; // <-- NEW IMPORT
import jakarta.persistence.Column;     // <-- NEW IMPORT

@Entity
public class TodoItem {

    // ... (id and description fields remain the same) ...
    
    private boolean completed;
    
    @Column(nullable = false, updatable = false) // <-- Column definition
    private LocalDateTime createdAt; // <-- NEW FIELD

    // Default constructor is required by JPA
    public TodoItem() {
    }

    // Constructor for creating new items
    public TodoItem(String description) {
        this.description = description;
        this.completed = false;
        // REMOVE: this.createdAt = LocalDateTime.now(); 
    }
    
    // NEW METHOD: Hibernate will call this method before saving a new entity
    @PrePersist
    protected void onCreate() {
        this.createdAt = LocalDateTime.now();
    }
    
    // ... (All other Getters/Setters and toString remain the same) ...
}